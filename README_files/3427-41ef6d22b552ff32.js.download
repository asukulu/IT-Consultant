"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3427],{5990:function(e,t,s){s.d(t,{H:function(){return r}});var n=s(27573),i=s(17886),l=s(87659),a=s(93124);function r(e){let{children:t}=e;return(0,n.jsx)(i.u,{tooltipContent:(0,n.jsxs)("div",{className:"max-w-48 p-1",children:[(0,n.jsx)("p",{className:"mb-2 whitespace-break-spaces text-xs tracking-tight",children:(0,n.jsx)(a.Z,{defaultMessage:"This is an example project. Create a new project to work with your own documents.",id:"aod9/juMdU"})}),(0,n.jsx)(l.default,{href:"/projects/create",className:"text-accent-secondary-200 text-xs tracking-tight",children:(0,n.jsx)(a.Z,{defaultMessage:"Create new project",id:"a7FtAnfVfj"})})]}),children:t})}},52433:function(e,t,s){s.d(t,{W:function(){return g}});var n=s(27573),i=s(24658),l=s(70443),a=s(11096),r=s(74651),d=s(44846),o=s(87659),c=s(7653),u=s(91237),x=s(93124),h=s(27957);function g(e){let{isOpen:t,onClose:s,project:g}=e,m=(0,u.Z)(),[f,p]=(0,c.useState)(g.prompt_template),[j,v]=(0,c.useState)(!1),{value:y}=(0,d.F)("claudeai_custom_styles"),{value:w}=(0,d.F)("claude_ai_cayenne"),{addError:b}=(0,i.e)(),{mutateAsync:N}=(0,h.dY)(g.uuid),M=async()=>{v(!0);try{await N({prompt_template:f}),s(),v(!1)}catch(e){b(m.formatMessage({defaultMessage:"Error saving instructions, please try again later",id:"WL3FdCcP2y"})),v(!1)}},S=g.prompt_template.length>0&&0===f.length,C=w?(0,n.jsx)(x.Z,{defaultMessage:"This will work alongside <link>user preferences</link> and the selected style in a chat.",values:{link:e=>(0,n.jsx)(o.default,{className:"hover:underline",href:"/settings/profile",children:e})},id:"NlixH3av58"}):(0,n.jsx)(x.Z,{defaultMessage:"This will work alongside the selected style in a chat.",id:"rptxrPz/Y3"});return(0,n.jsxs)(r.u_,{isOpen:t,onClose:s,modalSize:"lg",children:[(0,n.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,n.jsx)("h2",{className:"font-styrene-display text-xl font-medium",children:(0,n.jsx)(x.Z,{defaultMessage:"Set project instructions",id:"+On7CFwfGv"})}),(0,n.jsxs)("p",{className:"text-text-300 text-sm",children:[(0,n.jsx)(x.Z,{defaultMessage:"Provide Claude with relevant instructions and information for chats within {projectName}.",id:"NM6ePuQ0y+",values:{projectName:g.name}}),"\xa0",y&&C]})]}),(0,n.jsx)("div",{className:"mb-6 mt-3",children:(0,n.jsx)(l.Kx,{value:f,onChange:e=>p(e.target.value),placeholder:m.formatMessage({defaultMessage:"Think step by step and show reasoning for complex problems. Use specific examples.",id:"j554E3Ar1K"})+"\n\n"+m.formatMessage({defaultMessage:"Break down large tasks and ask clarifying questions when needed.",id:"H/tJ47E9to"})+"\n\n"+m.formatMessage({defaultMessage:"Use Artifacts only for web apps and code demos.",id:"U50hIJOW7M"})+"\n\n"+m.formatMessage({defaultMessage:"When giving feedback, explain thought process and highlight issues and opportunities.",id:"f2YGj7vTV3"}),minRows:8,required:!0,customScrollbar:!0,className:"max-h-60"})}),(0,n.jsxs)("div",{className:"mt-2 flex justify-end gap-2",children:[(0,n.jsx)(a.z,{variant:"secondary",onClick:s,children:(0,n.jsx)(x.Z,{defaultMessage:"Cancel",id:"47FYwba+bI"})}),(0,n.jsx)(a.z,{loading:j,disabled:g.prompt_template===f,onClick:()=>{M()},children:S?(0,n.jsx)(x.Z,{defaultMessage:"Clear Instructions",id:"irlLU/gWty"}):(0,n.jsx)(x.Z,{defaultMessage:"Save Instructions",id:"ctY95GUX+w"})})]})]})}},69576:function(e,t,s){s.d(t,{U:function(){return Q}});var n=s(27573),i=s(24658),l=s(11096),a=s(12068),r=s(99694),d=s(71473),o=s(98599),c=s(62124),u=s(3095),x=s(7653),h=s(93124),g=s(48970),m=s(6274),f=s(86825),p=s(48814),j=s(17886),v=s(95166),y=s(11050),w=s(57908),b=s(82177),N=s(91237);let M=e=>{let{file:t,canEditKnowledgeBase:s,isLoading:i,deleteFile:a,shouldHideDeleteButton:r,relativeFileLength:d,compressButton:o}=e,c=(0,N.Z)(),u="created_at"in t?t.created_at:null;return(0,n.jsxs)("div",{className:(0,w.Z)("group flex items-center gap-2 rounded-lg py-0.5 transition-colors lg:-ml-1.5 lg:-mr-1 lg:p-1",s&&"lg:hover:bg-bg-300"),children:[(0,n.jsx)(f.mB,{file:t,size:"xs"}),(0,n.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,n.jsx)("div",{className:"mb-0.5 mt-1 line-clamp-1 break-all text-sm",children:(0,f.a9)(t.file_name)}),(0,n.jsxs)("div",{className:"text-text-400 flex items-center gap-1 text-xs",children:[!!u&&(0,n.jsx)(p.i,{datetime:b.ou.fromISO(u),locale:c.locale}),!!d&&(0,n.jsxs)(n.Fragment,{children:[!!u&&(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("span",{className:"text-text-500/50 text-[6px]",children:"•"})}),d]})]})]}),s&&(0,n.jsx)("div",{className:(0,w.Z)("transition-opacity group-has-[:focus-visible]/row:opacity-100 group-hover:opacity-100",i?"opacity-100":"lg:opacity-0"),children:i?(0,n.jsx)(v.U,{className:"animate-spin",size:18}):(0,n.jsxs)("div",{className:(0,w.Z)("transition-opacity",r?"opacity-0":"opacity-100"),children:[o,(0,n.jsx)(j.u,{tooltipContent:c.formatMessage({defaultMessage:"Remove",id:"G/yZLul6P1"}),children:(0,n.jsx)(l.z,{size:"icon_sm",variant:"ghost",disabled:i||r,onClick:a,"aria-label":c.formatMessage({defaultMessage:"Remove from project knowledge",id:"eRF6oJ+Cb5"}),children:(0,n.jsx)(y.r,{size:16})})})]})})]})},S=e=>{let{doc:t,canEditKnowledgeBase:s,shouldHideDeleteButton:i=!1,compressButton:l}=e,{mutate:a,isPending:r}=(0,g.ER)(t.project_uuid),d=(0,x.useMemo)(()=>(function(e){let t={2e4:"Large file",6e4:"Very large file"},s=e.length,n=Object.keys(t).reverse();for(let e=0;e<n.length;e++)if(s>parseInt(n[e]))return t[n[e]]})(t.content),[t]),o=(0,x.useMemo)(()=>new TextEncoder().encode(t.content).length,[t]);return(0,n.jsx)(M,{file:{created_at:t.created_at,file_name:t.file_name,file_size:o,file_type:"",extracted_content:t.content},canEditKnowledgeBase:s,isLoading:r,shouldHideDeleteButton:i,relativeFileLength:d,deleteFile:()=>a({docUuid:t.uuid}),compressButton:l})},C=e=>{let{file:t,projectUuid:s,canEditKnowledgeBase:i,shouldHideDeleteButton:l=!1}=e,{mutate:a,isPending:r}=(0,g.h4)(s);return(0,n.jsx)(M,{file:t,canEditKnowledgeBase:i,isLoading:r,shouldHideDeleteButton:l,deleteFile:()=>a({file_uuids:[t.file_uuid]})})};var k=s(33435),E=s(55722),U=s(2906),Z=s(50513),I=s(71854),D=s(76009),_=s(62973),z=s(72500),P=s(96100),F=s(958),A=s(23428),T=s(35934),O=s(57385),L=s(13143),R=s(85285),G=s(84001),B=s(13789);function H(e){let{uri:t,isError:s,isLink:i=!1}=e,{data:l,isLoading:a}=(0,A.gQ)({documentId:t}),r=(0,B.v)(t);return(0,n.jsx)(G.$,{title:null==l?void 0:l.title,url:r,isLoading:a,isError:s,isLink:i,defaultErrorTitle:"Outline"})}var K=s(65291);function q(e){let{projectUuid:t,syncSource:s,isActionsHidden:i,canEditKnowledgeBase:l}=e,a=(0,T.mo)(),[d,o]=(0,x.useState)(!1),{type:c,status:{state:u,current_file_count:g,current_size_bytes:m},config:f}=s,p=(0,D.ir)(u),j=c===r.Fg.GITHUB?(null!=m?m:0)/I.dS:(null!=m?m:0)/I.r6,v=(0,T.nR)(t),y=(0,x.useMemo)(()=>void 0===v?0:Math.max(0,v-j),[v,j]);return(0,n.jsxs)("div",{className:(0,w.Z)("group flex flex-row items-center gap-2 rounded-lg px-0  lg:-ml-1.5 lg:-mr-1 lg:p-1 transition relative",l&&"lg:hover:bg-bg-300"),children:[(0,n.jsxs)("div",{className:"flex-1 inline-flex items-center gap-2",children:[(0,n.jsx)("div",{className:(0,w.Z)("relative inline-flex items-center shrink-0 justify-center h-10 w-10 m-0.5 border-0.5 border-border-300 rounded-lg",l&&"group-hover:border-border-200 group-hover:bg-bg-200"),children:(0,n.jsx)(Z.j0,{type:c,size:24,variant:Z.cT.DOCS,isError:p})}),(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:"text-sm line-clamp-1 break-all",children:c===r.Fg.GITHUB?(0,n.jsx)(R.d,{config:f,isError:p}):c===r.Fg.GDRIVE?(0,n.jsx)(O.C,{uri:f.uri,isError:p,isLink:u!==r.co.UNAUTHENTICATED}):c===r.Fg.OUTLINE?(0,n.jsx)(H,{uri:f.outline_uri,isError:p,isLink:u!==r.co.UNAUTHENTICATED}):null}),(0,n.jsxs)("div",{className:"flex flex-row gap-1 text-xs text-text-400",children:[(0,n.jsx)("span",{className:"line-clamp-1",children:(0,n.jsx)(K.w,{syncSource:s})}),!!g&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{className:"text-text-500/50 text-[6px] hidden sm:inline",children:(0,n.jsx)(n.Fragment,{children:"•"})}),(0,n.jsx)("span",{className:"hidden sm:inline",children:(0,n.jsx)(h.Z,{defaultMessage:"{count, plural, one {# file} other {# files}}",id:"Lf81FX5U/k",values:{count:g}})})]})]})]})]}),!i&&(0,n.jsx)(V,{isError:p,canRefresh:s.type===r.Fg.GITHUB,onEdit:s.type===r.Fg.GITHUB?()=>o(!0):void 0,projectUuid:t,syncSource:s}),s.type===r.Fg.GITHUB&&(0,n.jsx)(L.U,{isOpen:d,onClose:()=>o(!1),tokenLimit:a,alreadyUsedTokens:y,projectUuid:t,syncSource:s})]})}function V(e){let{isError:t,canRefresh:s,onEdit:a,projectUuid:r,syncSource:d}=e,{mutateAsync:o}=(0,m.zB)(r),c=(0,N.Z)(),{isUpdating:u,isFailing:h,handleUpdate:g}=function(e){let{projectUuid:t,syncSource:s}=e,[n,l]=(0,x.useState)(!1),{addSuccess:a}=(0,i.e)(),r=(0,N.Z)(),{mutate:d}=(0,m.l2)(t,{onSuccess:()=>{a(r.formatMessage({defaultMessage:"Update enqueued",id:"1w/eI79UGE"}))}});(0,x.useEffect)(()=>{l(!1)},[s.status]);let o=(0,A.sf)(s)||n,c=(0,A.xm)(s),u=(0,x.useCallback)(()=>{o||(l(!0),d({sync_source_uuid:s.uuid,sync_source_config:s.config}))},[o,d,s.config,s.uuid]);return{isUpdating:o,isFailing:c,handleUpdate:u}}({projectUuid:r,syncSource:d});return(0,n.jsxs)("div",{className:(0,w.Z)("h-full lg:pl-4 lg:absolute flex items-center lg:pr-2 right-0 rounded-md lg:bg-gradient-to-l from-bg-200 from-80% group-hover:from-bg-300 transition-all lg:opacity-0 group-hover:opacity-100 group-has-[:focus-visible]/row:opacity-100",u&&"lg:opacity-100"),children:[!t&&s&&(0,n.jsx)(j.u,{tooltipContent:u?c.formatMessage({defaultMessage:"Syncing...",id:"S92mvo6R0o"}):h?c.formatMessage({defaultMessage:"Sync failed. Click to retry",id:"zOAqlyzs1U"}):c.formatMessage({defaultMessage:"Sync now",id:"SwsYB/OerA"}),children:(0,n.jsx)(l.z,{variant:"ghost",size:"icon_sm",onClick:g,children:u?(0,n.jsx)(_.t,{className:"animate-spin"}):h?(0,n.jsx)(z.v,{}):(0,n.jsx)(_.t,{})})}),!t&&a&&(0,n.jsx)(j.u,{tooltipContent:c.formatMessage({defaultMessage:"Configure files",id:"rAV3qK0Jqb"}),children:(0,n.jsx)(l.z,{variant:"ghost",size:"icon_sm",onClick:a,children:(0,n.jsx)(P.X,{})})}),(0,n.jsx)(j.u,{tooltipContent:c.formatMessage({defaultMessage:"Remove",id:"G/yZLul6P1"}),children:(0,n.jsx)(l.z,{variant:"ghost",size:"icon_sm",onClick:()=>o(d.uuid),children:(0,n.jsx)(F.r,{})})})]})}s(88075);var W=s(98219);let Y="project_syncs",X="project_docs",J="project_linked_files";function Q(e){let{project:t,canEditKnowledgeBase:s=!1,isUploadingDoc:i=!1,isUploadingDriveSync:r=!1,isUploadingOutlineSync:o=!1,isUploadingGithubSync:x=!1,setIsUploadingDoc:g,setIsUploadingDriveSync:m,setIsUploadingOutlineSync:f,setIsUploadingGithubSync:p,maxItems:j,onViewAll:v,onClickProjectDoc:y}=e,{githubSyncSources:w,driveSyncSources:b,outlineSyncSources:N,projectDocs:M,linkedFiles:k,isFetchingKnowledge:E,knowledgeCount:Z}=ee({projectUuid:t.uuid,maxItems:j}),{isDeleting:I,selectedItems:D,handleSelect:_,selectAllItems:z,isInSelectionMode:P,toggleSelectMode:F,handleDeleteSelected:A}=et({githubSyncSources:w,driveSyncSources:b,outlineSyncSources:N,projectDocs:M,linkedFiles:k,projectUuid:t.uuid,isEnabled:s});$({clearUploadingState:()=>null==g?void 0:g(!1),numItems:M.length+k.length}),$({clearUploadingState:()=>null==p?void 0:p(!1),numItems:w.length}),$({clearUploadingState:()=>null==m?void 0:m(!1),numItems:b.length}),$({clearUploadingState:()=>null==f?void 0:f(!1),numItems:N.length});let T={isInSelectionMode:P,canEditKnowledgeBase:s},O=new Set(D.map(e=>{let{uuid:t}=e;return t}));return E?(0,n.jsx)(a.g,{height:65,className:"opacity-25 rounded-lg mb-3 mt-3"}):0===Z?(0,n.jsx)(es,{canEditKnowledgeBase:s}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(c.M,{children:s&&(0,n.jsx)(u.E.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},children:(0,n.jsx)(W.n,{projectUuid:t.uuid})})}),(0,n.jsx)("ul",{className:"flex flex-col py-1",children:(0,n.jsxs)(c.M,{initial:!1,children:[(0,n.jsx)(ei,{isShown:r},"drive-skeleton-loader"),b.map(e=>(0,n.jsx)(en,{isSelected:O.has(e.uuid),...T,handleSelect:(t,s)=>_({uuid:e.uuid,type:Y},t,s),children:(0,n.jsx)(q,{projectUuid:t.uuid,syncSource:e,canEditKnowledgeBase:s,isActionsHidden:P||!s})},e.uuid)),(0,n.jsx)(ei,{isShown:o},"outline-skeleton-loader"),N.map(e=>(0,n.jsx)(en,{isSelected:O.has(e.uuid),...T,handleSelect:(t,s)=>_({uuid:e.uuid,type:Y},t,s),children:(0,n.jsx)(q,{projectUuid:t.uuid,syncSource:e,canEditKnowledgeBase:s,isActionsHidden:P||!s})},e.uuid)),(0,n.jsx)(ei,{isShown:x},"github-skeleton-loader"),w.map(e=>(0,n.jsx)(en,{isSelected:O.has(e.uuid),...T,handleSelect:(t,s)=>_({uuid:e.uuid,type:Y},t,s),children:(0,n.jsx)(q,{projectUuid:t.uuid,syncSource:e,canEditKnowledgeBase:s,isActionsHidden:P||!s})},e.uuid)),(0,n.jsx)(ei,{isShown:i},"doc-skeleton-loader"),M.map(e=>(0,n.jsx)(en,{isSelected:O.has(e.uuid),...T,handleSelect:(t,s)=>_({uuid:e.uuid,type:X},t,s),className:y?"cursor-pointer":void 0,handleClick:()=>null==y?void 0:y(e.uuid),children:(0,n.jsx)(S,{doc:e,canEditKnowledgeBase:s,shouldHideDeleteButton:P,compressButton:void 0})},e.uuid)),k.map(e=>(0,n.jsx)(en,{isSelected:O.has(e.file_uuid),...T,handleSelect:(t,s)=>_({uuid:e.file_uuid,type:J},t,s),children:(0,n.jsx)(C,{file:e,projectUuid:t.uuid,canEditKnowledgeBase:s,shouldHideDeleteButton:P})},e.file_uuid)),(0,n.jsx)(c.M,{children:P&&(0,n.jsx)(u.E.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"ml-auto",children:(0,n.jsx)("div",{className:"flex mt-3 gap-2 justify-end",children:(0,n.jsx)(U.J,{isLoading:I,numSelected:D.length,totalNumItems:Z,handleSelectAll:z,handleCancel:()=>F(!1),handleDeleteSelected:A})})},"item-management-menu")})]})}),!!v&&!!j&&Z>j&&(0,n.jsx)("div",{children:(0,n.jsxs)(l.z,{variant:"unstyled",onClick:v,className:"hover:text-text-000 hover:underline !px-0 text-sm",children:[(0,n.jsx)(h.Z,{defaultMessage:"View all {count} files",id:"b36mSZ46cW",values:{count:Z}}),(0,n.jsx)(d.o,{size:16,className:"inline-block pl-1"})]})})]})}let $=e=>{let{clearUploadingState:t,numItems:s}=e,n=(0,x.useRef)(s);(0,x.useEffect)(()=>{s>n.current&&t(),n.current=s},[s,t])},ee=e=>{let{projectUuid:t,maxItems:s}=e,{data:n=[],isLoading:i}=(0,g.Kf)(t),l=[...n],{data:a=[],isLoading:d}=(0,m.yg)(t),{data:o=[]}=(0,g.pK)(t),c=[...o],u=a.filter(e=>{let{type:t}=e;return t===r.Fg.GDRIVE}),x=a.filter(e=>{let{type:t}=e;return t===r.Fg.OUTLINE}),h=a.filter(e=>{let{type:t}=e;return t===r.Fg.GITHUB});if(s){let e=s;[u,x,h,l,c].forEach(t=>{t.splice(e),e=Math.max(0,e-t.length)})}let f=[l,a,c].reduce((e,t)=>{var s;return e+(null!==(s=null==t?void 0:t.length)&&void 0!==s?s:0)},0);return{driveSyncSources:u,outlineSyncSources:x,githubSyncSources:h,projectDocs:l,linkedFiles:c,isFetchingKnowledge:i||d,knowledgeCount:f}},et=e=>{let{githubSyncSources:t,driveSyncSources:s,outlineSyncSources:n,projectDocs:l,linkedFiles:a,projectUuid:r,isEnabled:d}=e,o=s.map(e=>{let{uuid:t}=e;return{type:Y,uuid:t}}).concat(t.map(e=>{let{uuid:t}=e;return{type:Y,uuid:t}})).concat(n.map(e=>{let{uuid:t}=e;return{type:Y,uuid:t}})).concat(l.map(e=>{let{uuid:t}=e;return{type:X,uuid:t}})).concat(a.map(e=>{let{file_uuid:t}=e;return{type:J,uuid:t}})),{selectedItems:c,handleSelect:u,selectAllItems:x,isInSelectionMode:h,toggleSelectMode:f}=(0,k.M)(o,!d),{addError:p}=(0,i.e)(),{mutateAsync:j,isPending:v}=(0,m.IP)(r),{mutateAsync:y,isPending:w}=(0,g.op)(r),{mutateAsync:b,isPending:N}=(0,g.h4)(r),M=async()=>{let e=c.filter(e=>{let{type:t}=e;return t===X}),t=c.filter(e=>{let{type:t}=e;return t===Y}),s=c.filter(e=>{let{type:t}=e;return t===J});f(!1);try{await Promise.all([e.length?y({doc_uuids:e.map(e=>{let{uuid:t}=e;return t})}):Promise.resolve(),t.length?j({sync_source_uuids:t.map(e=>{let{uuid:t}=e;return t})}):Promise.resolve(),s.length?b({file_uuids:s.map(e=>{let{uuid:t}=e;return t})}):Promise.resolve()])}catch(e){p("Something went wrong while deleting. Refresh the page and try again")}};return{isDeleting:w||v||N,selectedItems:c,handleSelect:u,selectAllItems:x,isInSelectionMode:h,toggleSelectMode:f,handleDeleteSelected:M}},es=e=>{let{canEditKnowledgeBase:t}=e;return(0,n.jsxs)("div",{className:"bg-bg-500/10 text-text-400 mb-1 mt-2 flex w-full flex-col items-center gap-3 rounded-lg px-6 pb-10 pt-8 text-center text-sm",children:[(0,n.jsx)(o.g,{size:36,weight:"thin"}),t?(0,n.jsx)(h.Z,{defaultMessage:"No knowledge added yet. Add PDFs, documents, or other text to the project knowledge base that Claude will reference in every project conversation.",id:"j7/C6AKAfW"}):(0,n.jsx)(h.Z,{defaultMessage:"No knowledge added yet.",id:"frsVQgI4+c"})]})};function en(e){let{handleSelect:t,isSelected:s,isInSelectionMode:i,canEditKnowledgeBase:l,className:a,handleClick:r,children:d}=e;return(0,n.jsx)(u.E.li,{initial:{height:0,opacity:0},exit:{height:0,opacity:0},animate:{height:"auto",opacity:1},children:(0,n.jsx)(E.f,{itemName:"content",isSelected:s,checkboxOffset:"-left-4",isInSelectionMode:i,hiddenAndDisabled:!l,handleSelect:t,children:(0,n.jsx)("div",{className:a,onClick:r,children:d})})})}function ei(e){let{isShown:t}=e;return t?(0,n.jsx)(u.E.li,{className:"flex items-center overflow-hidden",initial:{height:0,opacity:0},animate:{height:"3rem",opacity:1},children:(0,n.jsxs)("div",{className:"flex flex-row items-center gap-2 w-full",children:[(0,n.jsx)(a.g,{className:"opacity-25 rounded-lg h-48 shrink-0",height:40,width:40}),(0,n.jsxs)("div",{className:"flex flex-col w-full gap-1",children:[(0,n.jsx)(a.g,{className:"opacity-25 rounded-lg",height:12,width:"50%"}),(0,n.jsx)(a.g,{className:"opacity-25 rounded-lg",height:12,width:"90%"})]})]})},0):null}},98219:function(e,t,s){s.d(t,{n:function(){return R},l:function(){return P}});var n=s(27573),i=s(98635),l=s(49456),a=s(88075),r=s(24658),d=s(70443),o=s(11096),c=s(61814),u=s(74651),x=s(17886),h=s(50513),g=s(84115),m=s(49793),f=s(99694),p=s(84344),j=s(47787),v=s(95014),y=s(90067),w=s(72834),b=s(26821),N=s(57908),M=s(7653),S=s(91237),C=s(93124),k=s(48970),E=s(27957),U=s(23428),Z=s(35934),I=s(5990),D=s(50749),_=s(13143),z=s(64965);s(12068),s(6274);let P=e=>{let{projectUuid:t,isStarterProject:s,isUploading:d,setIsUploadingDoc:o,setIsUploadingGithubSync:c,setIsUploadingDriveSync:u,setIsUploadingOutlineSync:x}=e,{activeOrganization:h}=(0,a.t)(),g=null==h?void 0:h.uuid,f=(0,S.Z)(),p=(0,M.useRef)(null),[j,v]=(0,M.useState)(""),[y,w]=(0,M.useState)(""),[N,I]=(0,M.useState)(!1),[D,z]=(0,M.useState)(!1),[P,A]=(0,M.useState)(!1),{addError:T}=(0,r.e)(),{mutateAsync:O}=(0,k.u3)(t,{onError:()=>o(!1)}),{data:R}=(0,E.Yc)(t),{isGithubAuthenticated:G,initGithubAuth:B}=(0,U.Yn)({callerIdentifier:"project",toggleGithubModalOpen:z}),H=(0,U.P8)(),{isOutlineAuthenticated:K}=(0,U.vc)(),q=(0,U.J$)(),V=(0,U.E4)(),W=(0,Z.nR)(t),Y=(0,Z.mo)(),X=(null!=W?W:0)>Y,J=(0,b.useQueryClient)(),Q=(0,M.useCallback)(async(e,s)=>{for(let t of e)await O({file_name:t.file_name,content:t.extracted_content});s.length&&J.invalidateQueries({queryKey:[m.jb,{orgUuid:g,projectUuid:t}]})},[O,g,t,J]),$=(0,l.eh)(),{handleUpload:ee}=(0,i.Vn)({imagesEnabled:!1,blobFileUploadsEnabled:$,rasterizePdfUploadsEnabled:!1,onUploadComplete:async function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];await Q(...t)},onError:()=>{o(!1)},projectUuid:t}),et=(0,M.useCallback)(async e=>{let t=e.target.files;t&&(o(!0),await ee(Array.from(t),Y-(null!=W?W:0)),o(!1)),e.target.value=""},[ee,o,W,Y]),es=async()=>{try{I(!1),o(!0),await O({file_name:y,content:j}),w(""),v("")}catch(e){o(!1),T(f.formatMessage({defaultMessage:"Error saving text content",id:"9U64gLEIVo"}))}};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("input",{"data-testid":"project-doc-upload",ref:p,type:"file",className:"hidden",accept:(0,l.tB)({imagesEnabled:!1,outOfContextFilesEnabled:$}).join(","),onChange:et,multiple:!0}),(0,n.jsx)(F,{projectUuid:t,shouldShowGithubSyncSource:H,shouldShowDriveSyncSource:V,shouldShowOutlineSyncSource:q,handleGithubClick:()=>{if(G){z(!0);return}B()},handleOutlineClick:()=>{K?A(!0):T((0,n.jsxs)("div",{className:"flex flex-col items-start",children:[(0,n.jsx)("div",{children:(0,n.jsx)(C.Z,{defaultMessage:"You need to connect to Outline before using this feature.",id:"PejG+e4wN5"})}),(0,n.jsx)("button",{onClick:()=>{window.location.href="/settings/profile"},className:"mt-2 underline",children:(0,n.jsx)(C.Z,{defaultMessage:"Connect to Outline",id:"m1DuTWXorQ"})})]}))},handleFileUploadClick:()=>{p.current&&p.current.click()},handleTextContentClick:()=>I(!0),isPrivateProject:!!(null==R?void 0:R.is_private),isStarterProject:s,isOverProjectKnowledgeLimit:X,isLoading:d,setIsUploadingDriveSync:u}),(0,n.jsx)(L,{isOpen:N,onClose:()=>I(!1),title:y,setTitle:w,content:j,setContent:v,onSave:es}),H&&(0,n.jsx)(_.U,{isOpen:D,onClose:()=>z(!1),projectUuid:t,tokenLimit:Y,alreadyUsedTokens:null!=W?W:0,setIsUploadingGithubSync:c}),q&&""]})},F=e=>{let{projectUuid:t,shouldShowGithubSyncSource:s,shouldShowDriveSyncSource:i,handleGithubClick:l,handleFileUploadClick:a,handleTextContentClick:r,isPrivateProject:d,isStarterProject:o,isOverProjectKnowledgeLimit:u,isLoading:x,shouldShowOutlineSyncSource:h,handleOutlineClick:g,setIsUploadingDriveSync:m}=e,[j,v]=(0,M.useState)(!1),[w,b]=(0,M.useState)(!1),N=i||s,{isDriveAuthenticated:S,initDriveAuth:k,handleDriveTrigger:E,shouldShowDriveIndexingEnablementModal:Z}=(0,U.nC)({callerIdentifier:"project",handleAuthSuccess:e=>{v(e),e?setTimeout(()=>{b(e)},100):b(e)}}),I=S&&d&&!Z;return(0,n.jsxs)(c.Lt,{align:"end",unstyledTrigger:!0,trigger:(0,n.jsx)(A,{isStarterProject:o,isOverProjectKnowledgeLimit:u,isLoading:x}),open:j,onOpenChange:v,children:[(0,n.jsx)(c.hP,{onClick:a,className:"text-left",children:(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(y.p,{size:16}),(0,n.jsx)(C.Z,{defaultMessage:"Upload from device",id:"vMaZk5Jcnv"})]})}),(0,n.jsx)(c.hP,{onClick:r,className:"text-left",children:(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(p.P,{size:16}),(0,n.jsx)(C.Z,{defaultMessage:"Add text content",id:"G7XW3Mvn8X"})]})}),N?(0,n.jsx)(c.u2,{}):null,s&&(0,n.jsx)(T,{type:f.Fg.GITHUB,isPrivateProject:d,onClick:l}),i&&(0,n.jsx)(O,{projectUuid:t,isPrivateProject:d,setIsUploadingDriveSync:m,isOpen:w,setIsOpen:b,closeWholeDropdown:()=>{b(!1),v(!1)},showGoogleDriveSubDropdown:I,handleGoogleDriveButtonClick:()=>{!I&&d&&(S?E():k())}}),h&&(0,n.jsx)(T,{type:f.Fg.OUTLINE,isPrivateProject:d,onClick:g})]})},A=(0,M.forwardRef)((e,t)=>{let{isStarterProject:s,isOverProjectKnowledgeLimit:i,isLoading:l,...a}=e,r=(0,n.jsx)(o.z,{...a,ref:t,className:"!text-accent-secondary-100 gap-1.5 !rounded-lg flex items-center -mr-2 px-2 py-1 text-sm font-medium tracking-tight",variant:"ghost",size:"inline",disabled:s||i||l,loading:l,prepend:(0,n.jsx)(j.v,{size:16,weight:"bold"}),children:(0,n.jsx)(C.Z,{defaultMessage:"Add Content",id:"66s1201qd9"})});return s?(0,n.jsx)(I.H,{children:(0,n.jsx)("div",{children:r})}):i?(0,n.jsx)(x.u,{side:"bottom",tooltipContent:(0,n.jsx)(C.Z,{defaultMessage:"Project knowledge at capacity. Remove an existing file in order to add to knowledge",id:"g3hx72ya32"}),children:(0,n.jsx)("div",{children:r})}):r});A.displayName="ProjectDocUploaderDropdownTrigger";let T=e=>{let{type:t,isPrivateProject:s,isSubTrigger:i=!1,isSubDropdownOpen:l=!1,onClick:a}=e,r=i?c.WR:c.hP,d=(0,n.jsxs)(r,{onClick:a,onPointerLeave:e=>{i&&l&&e.preventDefault()},onPointerMove:e=>{i&&l&&e.preventDefault()},disabled:!s,className:"text-left",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(h.j0,{type:t,size:16}),(0,D.DH)(t)]}),i&&(0,n.jsx)(v.T,{size:16})]});return s?d:(0,n.jsx)(x.u,{side:"left",tooltipContent:(0,n.jsx)(C.Z,{defaultMessage:"Only accessible from private projects",id:"lNrma+LwGe"}),children:(0,n.jsx)("div",{children:d})})},O=e=>{let{projectUuid:t,isPrivateProject:s,setIsUploadingDriveSync:i,isOpen:l,setIsOpen:a,closeWholeDropdown:r,showGoogleDriveSubDropdown:d,handleGoogleDriveButtonClick:o}=e;return d?(0,n.jsxs)(c.Vy,{open:l,onOpenChange:a,children:[(0,n.jsx)(T,{type:f.Fg.GDRIVE,isPrivateProject:s,isSubTrigger:!0,isSubDropdownOpen:l}),(0,n.jsx)(c.nI,{children:(0,n.jsx)(z.C,{projectUuid:t,isSubDropdown:!0,setIsUploadingDriveSync:i,isOpen:l,setIsOpen:a,closeWholeDropdown:r,shouldAddSyncUponPaste:!0})})]}):(0,n.jsx)(T,{type:f.Fg.GDRIVE,isPrivateProject:s,onClick:o})},L=e=>{let{isOpen:t,onClose:s,title:i,setTitle:l,content:a,setContent:r,onSave:c}=e,x=(0,S.Z)(),h=(0,M.useRef)(null);return(0,g.pp)({shouldFocus:t,target:h}),(0,n.jsx)(u.u_,{isOpen:t,onClose:s,modalSize:"xl",className:"p-7 pt-6",children:(0,n.jsxs)("form",{onSubmit:e=>{e.preventDefault(),""!==i.trim()&&""!==a.trim()&&c()},children:[(0,n.jsx)("h2",{className:"font-tiempos mb-3 text-xl",children:(0,n.jsx)(C.Z,{defaultMessage:"Add text content",id:"G7XW3Mvn8X"})}),(0,n.jsx)(d.oi,{ref:h,placeholder:x.formatMessage({defaultMessage:"Name your content",id:"C7Sx4g/l21"}),className:"mb-2 w-full",size:"lg",label:(0,n.jsx)(C.Z,{defaultMessage:"Title",id:"9a9+wwWy4u"}),value:i,onChange:e=>l(e.target.value),required:!0}),(0,n.jsx)(d.Kx,{placeholder:x.formatMessage({defaultMessage:"Type or paste in content...",id:"f5RDuqxeT2"}),label:x.formatMessage({defaultMessage:"Content",id:"Jq3FDzj0/T"}),minRows:12,value:a,onChange:e=>r(e.target.value),required:!0,className:"max-h-[50vh] overflow-y-auto"}),(0,n.jsxs)("div",{className:"mt-4 flex justify-end gap-2",children:[(0,n.jsx)(o.z,{variant:"secondary",onClick:e=>{e.preventDefault(),s()},children:(0,n.jsx)(C.Z,{defaultMessage:"Cancel",id:"47FYwba+bI"})}),(0,n.jsx)(o.z,{type:"submit",children:(0,n.jsx)(C.Z,{defaultMessage:"Add Content",id:"66s1201qd9"})})]})]})})},R=e=>{let{size:t="default",projectUuid:s,tooltipContent:i}=e,l=(0,Z.nR)(s),a=(0,Z.mo)();if(!l)return null;let r=Math.ceil(l/a*100),d=r>80&&r<100,c=r>=100;return(0,n.jsxs)("div",{className:(0,N.Z)("default"===t?"mt-3":"flex items-center gap-3"),children:[(0,n.jsx)("div",{className:(0,N.Z)("bg-bg-300 rounded-full p-0.5","small"===t&&"w-24"),children:(0,n.jsx)("div",{style:{width:"".concat(Math.min(100,r),"%")},className:(0,N.Z)("h-1 rounded-full transition-all",!d&&!c&&"bg-accent-secondary-100",d&&"bg-warning-orange",c&&"bg-danger-100")})}),(0,n.jsxs)("div",{className:(0,N.Z)("flex gap-2 items-center text-xs","default"===t&&"mt-2"),children:[(0,n.jsx)("div",{className:(0,N.Z)("flex-1",r<100&&"text-text-400",r>=100&&"text-danger-100 font-medium"),children:(0,n.jsx)(C.Z,{defaultMessage:"{pctUsed}% of knowledge capacity used",id:"2JyXZfrx4Q",values:{pctUsed:r}})}),(0,n.jsx)(x.u,{className:"text-center mt-0.5",side:"left",tooltipContent:null!=i?i:(0,n.jsx)(C.Z,{defaultMessage:"Project knowledge is currently limited to Claude's maximum context window size.",id:"zmLdyOeio5"}),children:(0,n.jsx)("div",{className:"flex items-center",children:(0,n.jsx)(o.z,{size:"unset",variant:"ghost",href:"https://support.anthropic.com/en/articles/9517075-what-are-projects",target:"_blank",className:"rounded-full",children:(0,n.jsx)(w.k,{size:16})})})})]}),r>=100&&(0,n.jsx)("div",{className:"text-text-400 text-xs",children:(0,n.jsx)(C.Z,{defaultMessage:"Remove an existing file in order to add to knowledge",id:"mSQjDnX2IA"})})]})}},50749:function(e,t,s){s.d(t,{DH:function(){return i}});var n=s(99694);let i=e=>n.hP[e]||e},33435:function(e,t,s){s.d(t,{M:function(){return i}});var n=s(7653);let i=(e,t)=>{let[s,i]=(0,n.useState)(!1),[l,a]=(0,n.useState)([]),r=(s,n)=>{t||a(t=>{if(!n||0===Object.keys(t).length)return[...t,s];let i=t[Object.keys(t).length-1],l=e.findIndex(e=>{let{uuid:t,type:s}=e;return t===i.uuid&&s===i.type});if(-1===l)return[...t,s];let a=e.findIndex(e=>{let{uuid:t}=e;return t===s.uuid}),r=e.slice(Math.min(l+1,a),Math.max(l-1,a)+1),d=t.map(e=>{let{uuid:t}=e;return t});return[...t,...r.filter(e=>{let{uuid:t}=e;return -1===d.indexOf(t)})]})},d=e=>{t||a(t=>t.filter(t=>{let{uuid:s,type:n}=t;return s!==e.uuid||n!==e.type}))};return(0,n.useEffect)(()=>{i(l.length>0)},[l]),{selectedItems:l,handleSelect:(e,s,n)=>{t||(s?r(e,n):d(e))},selectAllItems:()=>{t||a(e)},isInSelectionMode:!t&&s,toggleSelectMode:e=>{i(e),e||a([])}}}},55722:function(e,t,s){s.d(t,{f:function(){return r}});var n=s(27573),i=s(77508),l=s(17886),a=s(57908);function r(e){let{itemName:t,isInSelectionMode:s,isSelected:r,handleSelect:d,checkboxOffset:o,children:c,hiddenAndDisabled:u=!1}=e;return(0,n.jsxs)("div",{className:"relative group/row",children:[u?null:(0,n.jsx)("div",{className:(0,a.Z)("p-1 absolute z-10 top-1/2 -translate-y-1/2 -translate-x-1/2 transition duration-100 ",o,!s&&" opacity-0 scale-75 group-has-[:focus-visible]/row:opacity-100 group-has-[:focus-visible]/row:scale-100 group-hover/row:opacity-100 group-hover/row:scale-100"),children:(0,n.jsx)(l.u,{tooltipContent:r?"Deselect ".concat(t):"Select ".concat(t),className:"pointer-events-none",children:(0,n.jsx)("div",{children:(0,n.jsx)(i.X,{disabled:u,checked:r,onChange:d,label:"Select ".concat(t),hideLabel:!0})})})}),c]})}},2906:function(e,t,s){s.d(t,{J:function(){return a}});var n=s(27573),i=s(11096);s(7653);var l=s(93124);let a=e=>{let{isLoading:t,numSelected:s,totalNumItems:a,handleSelectAll:r,handleCancel:d,handleDeleteSelected:o}=e;return(0,n.jsxs)(n.Fragment,{children:[s<a&&(0,n.jsx)(i.z,{variant:"underline",className:"text-sm rounded-md text-accent-secondary-000 mr-2 !opacity-100 h-8",size:"unset",onClick:r,children:(0,n.jsx)(l.Z,{defaultMessage:"Select all",id:"94Fg25VD0N"})}),(0,n.jsx)(i.z,{size:"sm",variant:"secondary",onClick:d,children:(0,n.jsx)(l.Z,{defaultMessage:"Cancel",id:"47FYwba+bI"})}),(0,n.jsx)(i.z,{size:"sm",variant:"danger",disabled:0===s,onClick:o,loading:t,children:(0,n.jsx)(l.Z,{defaultMessage:"Delete <hidden>{space}Selected</hidden>",id:"QE60Po3yK8",values:{space:(0,n.jsx)(n.Fragment,{children:"\xa0"}),hidden:e=>(0,n.jsxs)("span",{className:"max-sm:hidden",children:[" ",e]})}})})]})}},85285:function(e,t,s){s.d(t,{d:function(){return l}});var n=s(27573),i=s(93124);function l(e){let{isError:t,config:s}=e;return t?(0,n.jsx)(i.Z,{defaultMessage:"GitHub",id:"wO9wb5D8Fn"}):(0,n.jsxs)("p",{children:[s.owner,(0,n.jsx)("span",{className:"opacity-25 px-0.5",children:"/"}),s.repo,(0,n.jsx)("span",{className:"border-0.5 bg-bg-200 font-mono text-text-300 border-border-200 px-0.5 rounded ml-1.5 text-xs hidden sm:inline",children:s.branch})]})}},65291:function(e,t,s){s.d(t,{w:function(){return x}});var n=s(27573),i=s(48814),l=s(17886),a=s(76009),r=s(99694),d=s(82177),o=s(91237),c=s(93124),u=s(23428);function x(e){let{syncSource:t}=e,s=(0,o.Z)(),x=(0,u.lP)(),{state:h,last_synced_at:g}=t.status;switch(h){case r.co.CREATED:case r.co.PENDING:case r.co.UPDATING:return(0,n.jsx)("span",{children:(0,n.jsx)(c.Z,{defaultMessage:"Syncing...",id:"S92mvo6R0o"})});case r.co.FAILED:case r.co.UPDATE_FAILED:return(0,n.jsx)("span",{className:"text-danger-100",children:(0,n.jsx)(c.Z,{defaultMessage:"Failed",id:"vXCeIi67rj"})});case r.co.READY:return g?(0,n.jsx)("span",{children:(0,n.jsx)(c.Z,{defaultMessage:"Last synced {relativeTime}",id:"bHMcz2sr6C",values:{relativeTime:(0,n.jsx)(i.i,{datetime:d.ou.fromISO(g),locale:s.locale})}})}):(0,n.jsx)("span",{children:(0,n.jsx)(c.Z,{defaultMessage:"Ready",id:"IZFEUgrg25"})});case r.co.UNAUTHENTICATED:return(0,n.jsx)("span",{className:"text-danger-100",children:(0,n.jsx)(c.Z,{defaultMessage:"You are not authenticated. <button>Authenticate</button>",id:"dRMzxrur9L",values:{button:e=>(0,n.jsx)("button",{className:"underline",onClick:()=>x(t.type),children:e})}})});case r.co.ACCESS_DENIED:return(0,n.jsx)("span",{className:"text-danger-100",children:(0,n.jsx)(c.Z,{defaultMessage:"Access denied, request via {source}",id:"iZUStU5eYI",values:{source:a.X_[t.type]}})});case r.co.DISABLED:return(0,n.jsx)(l.u,{tooltipContent:a.p5,children:(0,n.jsx)("span",{className:"text-danger-100",children:(0,n.jsx)(c.Z,{defaultMessage:"Content not accessible",id:"IPK01iLM7n"})})})}}},22161:function(e,t,s){s.d(t,{p:function(){return o}});var n=s(27573),i=s(11096),l=s(74651),a=s(57908);let r=s(7653).forwardRef((e,t)=>{let{value:s,className:i}=e,l=Math.round(100*Math.min(Math.max(s,0),1));return(0,n.jsx)("div",{ref:t,role:"progressbar","aria-valuenow":l,"aria-valuemin":0,"aria-valuemax":100,className:(0,a.Z)("w-full h-1 bg-bg-400 rounded-full overflow-hidden",i),children:(0,n.jsx)("div",{className:"h-full bg-accent-main-100 rounded-full transition-all duration-300 ease-in-out",style:{width:"".concat(l,"%")}})})});r.displayName="Progress";var d=s(62973);let o=e=>{let{isOpen:t=!1,onClose:s,onConfirm:a,modalTitle:o="Delete chat?",modalText:c="Are you sure you want to delete this chat?",isDeleting:u=!1,progress:x=0}=e;return(0,n.jsxs)(l.u_,{title:o,isOpen:t,onClose:s,children:[(0,n.jsx)("div",{className:"mt-1 mb-2",children:c}),u&&x>0&&(0,n.jsx)(r,{value:x}),(0,n.jsxs)(l.dm,{children:[(0,n.jsx)(i.z,{variant:"danger","data-testid":"delete-modal-confirm",onClick:a,disabled:u,children:u?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(d.t,{className:"inline-block mr-1 animate-spin",size:14}),"Deleting..."]}):"Delete"}),(0,n.jsx)(i.z,{variant:"secondary",onClick:s,children:"Cancel"})]})]})}},48814:function(e,t,s){s.d(t,{i:function(){return r}});var n=s(27573),i=s(82177),l=s(17886);let a={timeZoneName:"short",...i.ou.DATETIME_MED};function r(e){let{datetime:t,locale:s}=e;return(0,n.jsx)(l.u,{delayDuration:700,side:"bottom",tooltipContent:t.toLocaleString(a),children:(0,n.jsx)("span",{children:t.toRelative({locale:s})})})}}}]);